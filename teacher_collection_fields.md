# 👨‍🏫 教师集合 (teachers) 数据结构详情

此文档描述了名为 "teachers" 的数据集合的字段结构，基于实际集合字段分析。

## 🏷️ 集合基本信息
- **名称 (Name):** `teachers`
- **类型 (Type):** `Base`

## 📋 字段列表 (Fields)

以下是 "teachers" 集合中实际定义的字段：

### 👤 基本信息字段
1. **`id`**
   - **类型:** Text (T)
   - **约束:** Nonempty (必填)
   - **描述:** 教师唯一标识符

2. **`user_id`**
   - **类型:** Text (T)
   - **描述:** 用户ID

3. **`name`**
   - **类型:** Text (T)
   - **约束:** Nonempty (必填)
   - **描述:** 教师姓名

4. **`email`**
   - **类型:** Email (✉️)
   - **描述:** 邮箱地址

5. **`phone`**
   - **类型:** Text (T)
   - **描述:** 电话号码

6. **`nric`**
   - **类型:** Text (T)
   - **描述:** 身份证号码

7. **`address`**
   - **类型:** Text (T)
   - **描述:** 地址

### 🏢 工作相关信息
8. **`department`**
   - **类型:** Text (T)
   - **描述:** 部门

9. **`position`**
   - **类型:** Text (T)
   - **描述:** 职位

10. **`hireDate`**
    - **类型:** Date (📅)
    - **描述:** 入职日期

11. **`childrenCount`**
    - **类型:** Number (#)
    - **描述:** 子女数量

12. **`maritalStatus`**
    - **类型:** Select (☰)
    - **可选值:** `Married`, `Divorced`, `Separated`, `Single`
    - **选择方式:** Single (单选)
    - **描述:** 婚姻状况

### 💰 薪资和银行信息
13. **`epfNo`**
    - **类型:** Number (#)
    - **描述:** EPF号码

14. **`socsoNo`**
    - **类型:** Number (#)
    - **描述:** SOCSO号码

15. **`bankName`**
    - **类型:** Text (T)
    - **描述:** 银行名称

16. **`bankAccountNo`**
    - **类型:** Number (#)
    - **描述:** 银行账号

17. **`bankAccountName`**
    - **类型:** Text (T)
    - **描述:** 银行账户名

18. **`idNumber`**
    - **类型:** Number (#)
    - **描述:** ID号码

### 🔗 URL和链接
19. **`teacher_url`**
    - **类型:** Text (T)
    - **描述:** 教师URL

### 💳 NFC卡相关字段
20. **`nfc_card_number`**
    - **类型:** Text (T)
    - **描述:** NFC卡号

21. **`nfc_card_issued_date`**
    - **类型:** Date (📅)
    - **描述:** NFC卡发卡日期

22. **`nfc_card_expiry_date`**
    - **类型:** Date (📅)
    - **描述:** NFC卡过期日期

### 🔐 权限和安全
23. **`permissions`**
    - **类型:** Select (☰)
    - **可选值:** `normal_teacher`, `senior_teacher`
    - **选择方式:** Single (单选)
    - **描述:** 权限级别

24. **`status`**
    - **类型:** Select (☰)
    - **可选值:** `active`, `inactive`
    - **选择方式:** Single (单选)
    - **描述:** 教师状态

### 🔒 安全相关字段
25. **`security_status`**
    - **类型:** Select (☰)
    - **可选值:** `normal`, `suspicious`, `locked`
    - **选择方式:** Single (单选)
    - **描述:** 安全状态

26. **`last_swipe_time`**
    - **类型:** Date (📅)
    - **描述:** 最后刷卡时间

27. **`swipe_count_today`**
    - **类型:** Number (#)
    - **描述:** 今日刷卡次数

28. **`suspicious_activities`**
    - **类型:** Number (#)
    - **描述:** 可疑活动数量

29. **`auto_lock_until`**
    - **类型:** Date (📅)
    - **描述:** 自动锁定到期时间

30. **`lock_reason`**
    - **类型:** Text (T)
    - **描述:** 锁定原因

31. **`encryption_key_version`**
    - **类型:** Number (#)
    - **描述:** 加密密钥版本

32. **`encryption_salt`**
    - **类型:** Text (T)
    - **描述:** 加密盐值

33. **`encrypted_uid`**
    - **类型:** Text (T)
    - **描述:** 加密的唯一用户标识符

34. **`key_rotation_date`**
    - **类型:** Date (📅)
    - **描述:** 密钥轮换日期

35. **`verification_level`**
    - **类型:** Select (☰)
    - **可选值:** `normal`, `high`, `emergency`
    - **选择方式:** Single (单选)
    - **描述:** 验证级别

36. **`encryption_algorithm`**
    - **类型:** Select (☰)
    - **可选值:** `AES-128`, `AES-192`, `AES-256`, `CI`
    - **选择方式:** Single (单选)
    - **描述:** 使用的加密算法

## 📊 统计信息

基于代码分析，系统提供以下统计功能：

### 教师统计
- **总教师数:** `total`
- **活跃教师数:** `active`
- **非活跃教师数:** `inactive`
- **普通教师数:** `normal_teacher`
- **高级教师数:** `senior_teacher`

### 搜索和筛选功能
- **按姓名搜索**
- **按邮箱搜索**
- **按电话搜索**
- **按部门搜索**
- **按职位搜索**
- **按状态筛选**
- **按部门筛选**

## 🔄 NFC关联功能

### 当前实现
- 支持教师NFC卡关联
- 自动更新教师记录
- 记录关联时间

### 建议增强
1. **NFC使用统计**
   - 记录刷卡次数
   - 记录最后使用时间
   - 使用频率分析

2. **NFC状态管理**
   - 卡状态 (active/inactive/lost)
   - 过期时间管理
   - 自动提醒

3. **批量操作**
   - 批量关联NFC卡
   - 批量更新教师信息
   - 批量导出数据

## 🎯 与学生集合的对比

| 字段类型 | 学生集合 | 教师集合 |
|---------|---------|---------|
| 基本信息 | ✅ 完整 | ✅ 完整 |
| 联系信息 | ✅ 完整 | ✅ 完整 |
| 工作/学习信息 | 年级/班级 | 部门/职位 |
| 权限管理 | ❌ 无 | ✅ 有 |
| 薪资信息 | ❌ 无 | ✅ 有 |
| NFC支持 | ✅ 有 | ✅ 有 |
| 婚姻状况 | ❌ 无 | ✅ 有 |
| 子女信息 | ❌ 无 | ✅ 有 |

## ⚠️ 注意事项

1. **权限字段:** 教师集合包含权限管理 (`permissions`)，学生集合没有
2. **薪资信息:** 教师集合包含EPF、SOCSO、银行信息，学生集合没有
3. **状态管理:** 两个集合都有状态字段，但可选值不同
4. **NFC支持:** 两个集合都支持NFC关联功能
5. **安全字段:** 教师集合包含大量安全相关字段，根据您之前的要求可能需要清理

## 🔧 建议改进

1. **统一字段命名:** 确保学生和教师集合的相似字段使用一致的命名
2. **NFC字段标准化:** 为两个集合添加相同的NFC相关字段
3. **权限扩展:** 考虑为学生集合添加基础权限管理
4. **数据验证:** 加强必填字段的验证和约束
5. **安全字段清理:** 根据之前的要求，考虑移除或简化安全相关字段

## 🆕 NFC关联字段建议

基于当前的NFC关联功能，建议添加以下字段：

```dart
{
  'nfc_tag_id': 'NFC标签ID (用于关联)',
  'nfc_associated_at': 'NFC关联时间',
  'nfc_last_used': 'NFC最后使用时间',
  'nfc_usage_count': 'NFC使用次数'
}
```

---

**文档生成时间:** ${DateTime.now().toString().substring(0, 19)}
**版本:** 2.0
**基于:** 实际集合字段分析
