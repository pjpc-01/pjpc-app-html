# ğŸ“§ åŸºäºé‚®ç®±çš„å¤šè§’è‰²ç”¨æˆ·é…ç½®

## ğŸ¯ å®ç°æ–¹å¼

### **âœ… ä¸éœ€è¦æ·»åŠ æ•°æ®åº“å­—æ®µ**
- ä½¿ç”¨ç°æœ‰çš„ `role` å­—æ®µ
- é€šè¿‡é‚®ç®±è¯†åˆ«å¤šè§’è‰²ç”¨æˆ·
- åœ¨ä»£ç ä¸­é…ç½®å¤šè§’è‰²æ˜ å°„
- **è‡ªåŠ¨æ£€æŸ¥teachersé›†åˆä¸­çš„é‚®ç®±**

## ğŸ”§ é…ç½®æ–¹æ³•

### **1. åœ¨ä»£ç ä¸­é…ç½®å¤šè§’è‰²ç”¨æˆ·**

åœ¨ `lib/providers/auth_provider.dart` çš„ `_getMultiRoleUsersConfig()` æ–¹æ³•ä¸­æ·»åŠ ï¼š

```dart
Map<String, List<String>> _getMultiRoleUsersConfig() {
  return {
    'munpoo5566@gmail.com': ['admin', 'teacher', 'parent'],
    'admin_teacher@example.com': ['admin', 'teacher'],
    'teacher_parent@example.com': ['teacher', 'parent'],
    'triple_role@example.com': ['admin', 'teacher', 'parent'],
    // æ·»åŠ ä½ çš„å¤šè§’è‰²ç”¨æˆ·é‚®ç®±
    'your_email@example.com': ['admin', 'teacher'],
  };
}
```

### **2. è‡ªåŠ¨æ£€æµ‹teachersé›†åˆ**

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
- `users` é›†åˆä¸­çš„ç”¨æˆ·é‚®ç®±
- `teachers` é›†åˆä¸­çš„æ•™å¸ˆé‚®ç®±
- å¦‚æœä¸¤ä¸ªé›†åˆéƒ½æœ‰ç›¸åŒé‚®ç®±ï¼Œè‡ªåŠ¨æ·»åŠ  `teacher` è§’è‰²

## ğŸ“‹ è§’è‰²æ£€æµ‹é€»è¾‘

### **æ£€æµ‹é¡ºåº**
1. **é…ç½®æ–‡ä»¶æ£€æŸ¥**ï¼šæ£€æŸ¥æ˜¯å¦åœ¨ `_getMultiRoleUsersConfig()` ä¸­é…ç½®
2. **teachersé›†åˆæ£€æŸ¥**ï¼šæ£€æŸ¥ `teachers` é›†åˆä¸­æ˜¯å¦æœ‰ç›¸åŒé‚®ç®±
3. **å•ä¸€è§’è‰²**ï¼šä» `users.role` å­—æ®µè·å–

### **è‡ªåŠ¨è§’è‰²æ·»åŠ **
- å¦‚æœç”¨æˆ·åœ¨ `teachers` é›†åˆä¸­æœ‰è®°å½•ï¼Œè‡ªåŠ¨æ·»åŠ  `teacher` è§’è‰²
- å¦‚æœç”¨æˆ·åŸæœ¬æ˜¯ `admin`ï¼Œç°åœ¨ä¹Ÿä¼šæ˜¯ `admin + teacher`
- å¦‚æœç”¨æˆ·åŸæœ¬æ˜¯ `parent`ï¼Œç°åœ¨ä¹Ÿä¼šæ˜¯ `parent + teacher`

## ğŸ“Š å®é™…åº”ç”¨åœºæ™¯

### **åœºæ™¯1ï¼šç®¡ç†å‘˜ä¹Ÿæ˜¯æ•™å¸ˆ**
```dart
// usersé›†åˆ
{
  "email": "admin@school.com",
  "role": "admin"
}

// teachersé›†åˆ
{
  "email": "admin@school.com",
  "name": "å¼ è€å¸ˆ"
}

// ç»“æœï¼šç”¨æˆ·æ‹¥æœ‰ admin + teacher åŒé‡èº«ä»½
```

### **åœºæ™¯2ï¼šå®¶é•¿ä¹Ÿæ˜¯æ•™å¸ˆ**
```dart
// usersé›†åˆ
{
  "email": "parent@example.com", 
  "role": "parent"
}

// teachersé›†åˆ
{
  "email": "parent@example.com",
  "name": "æè€å¸ˆ"
}

// ç»“æœï¼šç”¨æˆ·æ‹¥æœ‰ parent + teacher åŒé‡èº«ä»½
```

### **åœºæ™¯3ï¼šä¸‰é‡èº«ä»½ç”¨æˆ·**
```dart
// é…ç½®æ–‡ä»¶ä¸­
'munpoo5566@gmail.com': ['admin', 'teacher', 'parent']

// teachersé›†åˆä¸­ä¹Ÿæœ‰è®°å½•
{
  "email": "munpoo5566@gmail.com",
  "name": "ç‹è€å¸ˆ"
}

// ç»“æœï¼šç”¨æˆ·æ‹¥æœ‰ admin + teacher + parent ä¸‰é‡èº«ä»½
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒ

### **è‡ªåŠ¨è§’è‰²æ£€æµ‹**
- ç™»å½•åç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰ç›¸å…³é›†åˆ
- æ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œè‡ªåŠ¨è¯†åˆ«å¤šè§’è‰²
- åŠ¨æ€æ›´æ–°è§’è‰²åˆ—è¡¨

### **è§’è‰²åˆ‡æ¢**
- æ˜¾ç¤ºæ‰€æœ‰æ£€æµ‹åˆ°çš„è§’è‰²
- å¯ä»¥åœ¨ä¸åŒèº«ä»½é—´è‡ªç”±åˆ‡æ¢
- åˆ‡æ¢åç•Œé¢ç«‹å³æ›´æ–°

## ğŸ”’ æƒé™ç®¡ç†

### **è§’è‰²æƒé™**
- **admin**: æ‰€æœ‰ç®¡ç†åŠŸèƒ½
- **teacher**: æ•™å­¦ç›¸å…³åŠŸèƒ½ + teachersé›†åˆä¸­çš„æƒé™
- **parent**: å®¶é•¿ç›¸å…³åŠŸèƒ½

### **æ•°æ®è®¿é—®**
- ä¸åŒè§’è‰²çœ‹åˆ°ä¸åŒçš„æ•°æ®èŒƒå›´
- æƒé™ä¸¥æ ¼æŒ‰è§’è‰²éš”ç¦»
- é˜²æ­¢è¶Šæƒè®¿é—®

## ğŸš€ ä¼˜åŠ¿

### **æ™ºèƒ½æ£€æµ‹**
- è‡ªåŠ¨æ£€æµ‹å¤šä¸ªé›†åˆä¸­çš„ç”¨æˆ·
- æ— éœ€æ‰‹åŠ¨é…ç½®æ¯ä¸ªç”¨æˆ·
- åŠ¨æ€è¯†åˆ«è§’è‰²å˜åŒ–

### **çµæ´»ç®¡ç†**
- å¯ä»¥éšæ—¶æ·»åŠ æˆ–ç§»é™¤å¤šè§’è‰²ç”¨æˆ·
- ä¸éœ€è¦æ•°æ®åº“æ“ä½œ
- é…ç½®å˜æ›´ç«‹å³ç”Ÿæ•ˆ

### **å‘åå…¼å®¹**
- ç°æœ‰å•ä¸€è§’è‰²ç”¨æˆ·ä¸å—å½±å“
- ä¿æŒåŸæœ‰åŠŸèƒ½ä¸å˜
- å¹³æ»‘å‡çº§ä½“éªŒ

## âš ï¸ æ³¨æ„äº‹é¡¹

### **é‚®ç®±ä¸€è‡´æ€§**
- `users` å’Œ `teachers` é›†åˆä¸­çš„é‚®ç®±å¿…é¡»å®Œå…¨ä¸€è‡´
- åŒºåˆ†å¤§å°å†™
- ç¡®ä¿é‚®ç®±æ ¼å¼æ­£ç¡®

### **è§’è‰²åç§°**
- è§’è‰²åç§°å¿…é¡»ä¸ç°æœ‰ `role` å­—æ®µå€¼ä¸€è‡´
- æ”¯æŒçš„è§’è‰²ï¼š`admin`, `teacher`, `parent`, `accountant`
- è§’è‰²åç§°åŒºåˆ†å¤§å°å†™

### **æ€§èƒ½è€ƒè™‘**
- å¼‚æ­¥æ£€æŸ¥teachersé›†åˆï¼Œä¸å½±å“ç™»å½•é€Ÿåº¦
- è§’è‰²æ£€æµ‹å®Œæˆåæ‰æ›´æ–°ç•Œé¢
- é¿å…é‡å¤æ£€æŸ¥

## ğŸ”„ ä½¿ç”¨æµç¨‹

1. **ç™»å½•**ï¼šä½¿ç”¨é‚®ç®±ç™»å½•
2. **æ£€æµ‹**ï¼šç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹æ‰€æœ‰ç›¸å…³é›†åˆ
3. **è¯†åˆ«**ï¼šè¯†åˆ«ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²
4. **æ˜¾ç¤º**ï¼šæ˜¾ç¤ºè§’è‰²åˆ‡æ¢å™¨ï¼ˆå¦‚æœå¤šè§’è‰²ï¼‰
5. **åˆ‡æ¢**ï¼šç‚¹å‡»å…¶ä»–è§’è‰²è¿›è¡Œåˆ‡æ¢
6. **æ›´æ–°**ï¼šç•Œé¢åŠŸèƒ½ç«‹å³æ›´æ–°

ç°åœ¨ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ `users` å’Œ `teachers` é›†åˆï¼Œæ™ºèƒ½è¯†åˆ«å¤šè§’è‰²ç”¨æˆ·ï¼
