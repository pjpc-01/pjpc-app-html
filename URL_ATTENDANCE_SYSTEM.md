# URL考勤系统使用说明

## 系统概述

URL考勤系统是一个基于学生专属URL的智能考勤管理系统，通过学生的专属URL进行身份识别和考勤记录。

## 核心功能

### 1. 系统概览
- **总学生数**: 显示有专属URL的学生总数
- **活跃学生**: 显示状态为活跃的学生数量
- **今日考勤**: 显示今日的签到和签退记录
- **系统健康度**: 显示系统运行状态

### 2. 学生URL管理
- **学生列表**: 显示所有有专属URL的学生信息
- **搜索过滤**: 支持按姓名、学号、URL、中心、状态进行搜索和过滤
- **数据导出**: 支持导出学生URL列表为CSV格式

### 3. 考勤记录
- **考勤历史**: 查看所有考勤记录
- **搜索功能**: 支持按学生信息、URL、时间等条件搜索
- **记录详情**: 显示每次考勤的详细信息

### 4. 考勤测试
- **URL测试**: 输入学生专属URL进行考勤测试
- **身份识别**: 自动识别学生身份并显示学生信息
- **测试记录**: 测试成功的考勤会添加到考勤记录中

## 数据来源

### 学生数据
- **来源**: PocketBase `students` 集合
- **URL字段**: `studentUrl`
- **关联字段**: `student_id`, `student_name`, `center`, `status`, `serviceType`

### 考勤记录
- **当前状态**: 使用模拟数据进行演示
- **下一步**: 集成真实的考勤API

## 使用方法

### 1. 访问系统
- 路径: `/url-attendance`
- 或通过管理员仪表板 → URL考勤系统

### 2. 查看学生URL
- 切换到"学生URL管理"标签页
- 使用搜索和过滤功能查找特定学生
- 查看学生的专属URL信息

### 3. 测试考勤
- 切换到"考勤测试"标签页
- 输入学生的专属URL
- 点击"测试考勤"按钮
- 查看测试结果和学生信息

### 4. 导出数据
- 点击右上角的"导出URL列表"按钮
- 系统会生成包含学生URL信息的CSV文件

## 技术架构

### 前端组件
- **框架**: Next.js + React + TypeScript
- **UI库**: Shadcn UI + Tailwind CSS
- **状态管理**: React Hooks (useState, useEffect)

### 数据获取
- **Hook**: `useStudents` - 获取学生数据
- **数据源**: PocketBase API
- **实时更新**: 支持手动刷新数据

### 考勤逻辑
- **URL匹配**: 通过`studentUrl`字段匹配学生
- **状态验证**: 检查学生状态是否为活跃
- **记录创建**: 生成考勤记录并更新统计

## 配置说明

### 学生URL格式
- 建议格式: `https://center.com/student-id`
- 示例: `https://center1.com/B1`, `https://center2.com/C1`
- 要求: 每个学生的URL必须唯一

### 中心配置
- 支持的中心: WX 01, WX 02, WX 03, WX 04
- 中心信息存储在学生的`center`字段中

### 服务类型
- 课后班 (`afterschool`)
- 补习 (`tuition`)

## 下一步开发

### 1. 真实考勤API集成
- 连接PocketBase考勤记录集合
- 实现真实的考勤记录功能
- 添加考勤规则和验证

### 2. 移动端优化
- 响应式设计优化
- 触摸友好的操作界面
- 离线支持

### 3. 高级功能
- 考勤统计报表
- 异常考勤提醒
- 批量操作功能
- 数据同步和备份

## 注意事项

1. **URL唯一性**: 确保每个学生的专属URL都是唯一的
2. **学生状态**: 只有状态为"活跃"的学生才能进行考勤
3. **数据同步**: 学生数据更新后需要刷新页面以获取最新信息
4. **测试环境**: 当前系统使用模拟数据进行演示

## 联系支持

如有问题或需要技术支持，请联系系统管理员。
