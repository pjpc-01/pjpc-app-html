# 积分管理系统使用指南

## 系统概述

积分管理系统是一个基于NFC卡片的积分奖励系统，允许教师通过扫描学生和教师的NFC卡片来管理学生积分。

## 功能特点

- ✅ **双重NFC验证**：学生NFC + 教师NFC验证
- ✅ **积分周期管理**：每3个月自动清除积分
- ✅ **完整操作记录**：所有积分变动都有详细记录
- ✅ **权限控制**：只有注册教师可以操作积分
- ✅ **礼物兑换**：学生可以用积分兑换礼物
- ✅ **管理员界面**：完整的积分管理后台

## 系统架构

### PocketBase集合

1. **student_points** - 学生积分总数
2. **point_transactions** - 积分交易记录
3. **teachers** - 教师信息（已添加NFC卡字段）

### 页面结构

- `/student-points/[cardNumber]` - 学生积分查看页面
- `/teacher-points/[cardNumber]` - 教师积分操作页面
- `/points-management` - 管理员积分管理界面

## 使用流程

### 1. 教师操作流程

1. **扫描学生NFC卡** → 获取学生信息
2. **扫描教师NFC卡** → 验证教师身份
3. **选择操作类型** → 加分/扣分/兑换礼物
4. **填写操作信息** → 积分数量、理由等
5. **确认操作** → 系统记录并更新积分

### 2. 学生查看流程

1. **扫描学生NFC卡** → 跳转到积分页面
2. **查看积分信息** → 当前积分、历史记录
3. **查看积分周期** → 剩余天数、周期信息

### 3. 管理员管理流程

1. **访问管理界面** → `/points-management`
2. **查看积分排行榜** → 学生积分排名
3. **管理学生积分** → 手动操作积分
4. **查看操作记录** → 所有积分变动历史

## 积分规则

### 积分周期
- 每3个月为一个积分周期
- 周期结束后积分自动清除
- 保留完整的历史记录

### 操作类型
- **加分**：表现优秀、积极参与等
- **扣分**：犯规、迟到等
- **兑换礼物**：使用积分兑换奖励

### 权限等级
- **普通教师**：基本积分操作权限
- **高级教师**：扩展操作权限
- **管理员**：完整管理权限

## 技术实现

### API接口
- `GET /api/points` - 获取积分数据
- `POST /api/points` - 创建积分交易

### 数据验证
- 教师NFC卡验证
- 学生身份验证
- 操作权限检查

### 安全机制
- 双重NFC验证
- 操作记录完整
- 权限分级管理

## 部署说明

### 1. PocketBase集合设置

确保在PocketBase中创建了以下集合：

- `student_points`
- `point_transactions`
- 在`teachers`集合中添加NFC卡字段

### 2. 环境配置

确保以下环境变量已配置：
- PocketBase连接信息
- NFC设备配置

### 3. 权限设置

在PocketBase中设置适当的访问规则：
- 教师只能操作自己权限范围内的积分
- 学生只能查看自己的积分信息
- 管理员拥有完整权限

## 维护说明

### 定期任务
- 积分周期自动清除（每3个月）
- 数据备份和清理
- 系统性能监控

### 故障排除
- 检查NFC设备连接
- 验证PocketBase连接
- 检查教师权限设置

## 联系支持

如有问题，请联系系统管理员或技术支持团队。

---

**版本**: 1.0.0  
**更新日期**: 2024年1月  
**维护团队**: 技术开发组
