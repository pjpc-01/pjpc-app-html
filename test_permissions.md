# 权限系统测试指南

## 🔐 权限系统测试步骤

### 1. **管理员权限测试**
- 登录管理员账户
- 进入学生管理界面
- 应该能看到所有学生
- 标题显示"学生管理"
- 操作按钮显示"添加学生"和"分行管理"

### 2. **教师权限测试**
- 登录教师账户
- 进入学生管理界面
- 应该只能看到分配的班级学生
- 标题显示"我的学生"
- 操作按钮显示"我的班级"和"考勤管理"
- 学生数量应该只显示分配的班级学生数量

### 3. **权限控制测试**
- 教师尝试编辑学生信息
- 应该根据权限显示不同按钮状态
- 无权限操作应该显示权限不足提示

### 4. **数据过滤测试**
- 搜索功能应该只搜索有权限的学生
- 中心筛选应该只显示有权限的中心
- 班级筛选应该只显示分配的班级

## ✅ 预期结果

### 管理员
- 查看所有学生 ✅
- 添加学生 ✅
- 编辑所有学生 ✅
- 删除学生 ✅
- 管理分行 ✅

### 教师
- 只查看分配的班级学生 ✅
- 不能添加学生 ❌
- 只能编辑分配的班级学生 ✅
- 不能删除学生 ❌
- 查看分配的班级 ✅

### 家长
- 只查看自己的孩子 ✅
- 不能编辑学生信息 ❌
- 不能添加学生 ❌
- 不能删除学生 ❌

## 🐛 可能的问题

1. **教师看不到学生**: 检查 `assigned_classes` 字段是否正确设置
2. **权限检查失败**: 检查 `role` 字段是否正确设置
3. **中心筛选不工作**: 检查 `center_assignment` 字段是否正确设置
4. **数据不更新**: 检查 AuthProvider 和 StudentProvider 的关联是否正确

## 🔧 调试方法

1. 检查浏览器控制台是否有错误
2. 检查网络请求是否正常
3. 检查用户角色和权限字段是否正确
4. 检查数据过滤逻辑是否正确执行
