# 教师工作台考勤报告功能

## 功能概述

教师工作台的考勤报告功能现已完善，提供了全面的考勤数据分析和报告生成功能。该功能支持学生和教师的考勤统计、异常监控、数据可视化以及报告导出。

## 主要功能

### 1. 考勤数据概览
- **学生出勤率统计**：显示学生的签到、签退、迟到、缺勤、早退情况
- **教师出勤率统计**：显示教师的签到、签退、迟到、缺勤情况
- **整体出勤率**：综合学生和教师的整体考勤情况
- **异常统计**：统计各类考勤异常的数量和趋势

### 2. 时间段选择
支持多种时间段查看考勤报告：
- 今天
- 本周
- 本月
- 本季度
- 本年

### 3. 考勤异常监控
- **异常记录列表**：显示所有考勤异常记录
- **异常类型分类**：迟到、缺勤、早退等
- **异常详情查看**：包含姓名、时间、原因等详细信息

### 4. 数据可视化
- **统计图表**：直观显示考勤数据分布
- **趋势分析**：考勤趋势变化（即将推出）
- **排行榜**：考勤表现排名

### 5. 报告导出
支持多种格式导出考勤报告：
- **JSON格式**：包含完整数据的结构化格式
- **CSV格式**：适合Excel打开的表格格式
- **文本格式**：简洁的摘要报告

## 使用方法

### 访问考勤报告
1. 在主界面点击"考勤报告"卡片
2. 进入考勤报告界面

### 查看不同时间段的数据
1. 点击右上角的时间段选择器
2. 选择想要查看的时间段
3. 系统会自动刷新数据

### 查看考勤异常
1. 切换到"异常"标签页
2. 查看所有考勤异常记录
3. 点击异常记录可查看详细信息

### 导出报告
1. 点击右上角的下载图标
2. 选择导出格式（JSON/CSV/文本）
3. 系统会生成文件并支持分享

## 技术实现

### 核心组件
- **AttendanceProvider**：考勤数据管理
- **PocketBaseService**：后端数据服务
- **ReportsScreen**：报告界面
- **AttendanceExportService**：导出服务

### 数据流程
1. 从PocketBase获取考勤记录
2. 在AttendanceProvider中进行数据处理和统计
3. 在ReportsScreen中展示数据
4. 通过ExportService生成和分享报告

### 新增的Widget组件
- **AttendanceSummaryCard**：考勤统计卡片
- **AttendanceChartWidget**：考勤图表组件
- **AttendanceExceptionItem**：异常记录项

## 数据字段说明

### 学生考勤记录
- `student_id`：学生ID
- `student_name`：学生姓名
- `type`：考勤类型（check_in/check_out）
- `date`：考勤日期
- `check_in_time`：签到时间
- `check_out_time`：签退时间
- `status`：考勤状态（normal/late/absent/early_leave）
- `notes`：备注信息

### 教师考勤记录
- `teacher_id`：教师ID
- `teacher_name`：教师姓名
- `type`：考勤类型（check_in/check_out）
- `date`：考勤日期
- `check_in_time`：签到时间
- `check_out_time`：签退时间
- `status`：考勤状态（normal/late/absent）
- `notes`：备注信息

## 注意事项

1. **数据权限**：只有已认证的用户才能查看考勤报告
2. **数据实时性**：报告数据基于当前数据库中的记录
3. **导出限制**：导出功能需要设备支持文件分享
4. **性能优化**：大量数据时建议选择较短的时间段

## 未来计划

- [ ] 添加更多图表类型（折线图、饼图等）
- [ ] 实现考勤趋势分析
- [ ] 添加考勤预测功能
- [ ] 支持自定义报告模板
- [ ] 添加邮件发送功能
- [ ] 实现考勤数据备份和恢复

## 更新日志

### v1.0.0 (2024-01-XX)
- ✅ 完善AttendanceProvider，添加教师考勤统计方法
- ✅ 在PocketBaseService中添加教师考勤报告相关方法
- ✅ 完善ReportsScreen，实现完整的考勤报告界面
- ✅ 创建考勤报告相关的Widget组件
- ✅ 添加考勤数据导出功能

---

*该功能基于360×800px屏幕分辨率设计，采用企业级智能UI设计理念，为NFC管理和学生管理提供专业的考勤报告解决方案。*
